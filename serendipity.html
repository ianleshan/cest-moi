<!DOCTYPE html>
<html>

    <head>

        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
        <title>Serendipity</title>
        <link rel="stylesheet" type="text/css" href="style2.css">

    </head>


    <body>


        <h1 id="p1">Loading...</h1>
        <div class="choices" id="c"></div>

        <script src="https://www.gstatic.com/firebasejs/3.5.0/firebase.js"></script>
        <script>
            var config = {
                apiKey: "AIzaSyAyBvMMrbtxMyCiSGRNvyK0jHTpkScUAm4",
                authDomain: "cest-moi.firebaseapp.com",
                databaseURL: "https://cest-moi.firebaseio.com",
            };
            firebase.initializeApp(config);

            var database = firebase.database();

            function setIndex(x) {
                var page = database.ref('/story/' + x);

                document.getElementById("c").innerHTML = "";

                database.ref("/story/" + x + "/" + "c" + "/").once('value', function(snapshot) {
                    snapshot.forEach(function(childSnapshot) {
                        var childKey = childSnapshot.key;
                        var childData = childSnapshot.val();
                        document.getElementById("c").innerHTML =
                            document.getElementById("c").innerHTML +
                            '<h2 id="' + childKey + '" onClick="setIndex(' + childKey +')">' + childData + "</h2>";
                    });
                });

                page.once('value').then(function(snapshot) {
                    var p = snapshot.val().p;
                    document.getElementById("p1").innerHTML = p;
                });
            }

            setIndex(1);
        </script>

    </body>



</html>
